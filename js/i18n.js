// Language translations
const translations = {
  en: {
    nav: {
      about: "About",
      services: "Services",
      expertise: "Expertise",
      contact: "Contact",
    },
    hero: {
      title: "Financial Expertise for Global Business",
      description:
        "Finspect Advisory provides end-to-end management reporting, financing, and CFO consulting services with global experience and local expertise.",
      contact: "Book a Consultation",
      services: "Our Services",
    },
    about: {
      tag: "About Us",
      title: "Who We Are",
      description:
        "At Finspect Advisory, we have a dedicated team of professionals with extensive experience in managing end-to-end management reporting, financing, and CFO consulting services.",
      feature1: "Bring global experience",
      feature2: "Have wide breadth of capabilities",
      feature3: "Value what's important to you",
      feature4: "Focus on building trust in relationships",
    },
    services: {
      tag: "Services",
      title: "Our Consulting Services",
      description: "Finspect Advisory offers:",
      optimization: {
        title: "Optimization of financial process",
        point1: "Reviewing financial process",
        point2: "Automation, optimization business process (implementation of ERP)",
        point3: "Setting up management reporting with specific KPIs",
        point4: "ERP implementation and optimization", 
        point5: "Power BI and Excel automation (including VBA)"
      },
      analysis: {
        title: "Financial analysis",
        point1: "Professional financial reports preparation (P&L, balance sheet, cash flow)",
        point2: "Comprehensive financial analysis and business diagnostics",
        point3: "General financial ratios analysis",
        point4: "Special ratios and analysis depending on business"
      },
      planning: {
        title: "Financial planning and forecasting/budgeting",
        point1: "Development and implementation of budgeting systems",
        point2: "Budget preparation and business metrics forecasting",
        point3: "Variance analysis",
        point4: "Cash flow analysis and forecasting"
      },
      modeling: {
        title: "Financial modeling",
        point1: "Modeling business cases for new projects/new business streams/products and services which includes 3-Statement modeling/DCF/Market comparison approaches",
      },
    },

    contact: {
      tag: "Contact Us",
      title: "Get in Touch",
      description: "Ready to transform your business? Contact us today for a free consultation.",
      address: "9, Buyuk Ipak Yuli st., Mirzo-Ulugbek district, Tashkent, UZ",
      phone: "+998974405320",
      email: "info@finspect.org",
      hours: "Monday - Friday: 9:00 AM - 6:00 PM",
    },
    footer: {
      copyright: "© 2025 Finspect Advisory. All rights reserved.",
    },
  },
  ru: {
    nav: {
      about: "О нас",
      services: "Услуги",
      expertise: "Экспертиза",
      contact: "Контакты",
    },
    hero: {
      title: "Финансовая экспертиза для глобального бизнеса",
      description:
        "Finspect Advisory предоставляет комплексные услуги по управленческой отчетности, финансированию и консультированию CFO с глобальным опытом и локальной экспертизой.",
      contact: "Заказать консультацию",
      services: "Наши услуги",
    },
    about: {
      tag: "О нас",
      title: "Кто мы",
      description:
        "В Finspect Advisory у нас есть преданная команда профессионалов с обширным опытом в управлении комплексной управленческой отчетностью, финансированием и консультационными услугами CFO.",
      feature1: "Глобальный опыт",
      feature2: "Широкий спектр возможностей",
      feature3: "Ценим то, что важно для вас",
      feature4: "Фокус на построении доверительных отношений",
    },
    services: {
      tag: "Услуги",
      title: "Наши основные услуги",
      description: "Finspect Advisory предлагает:",
      optimization: {
        title: "Оптимизация финансового процесса",
        point1: "Обзор и оптимизация (автоматизация) финансового процесса",
        point2: "Разработка и настройка планов счетов и финансовых процессов",
        point3: "Настройка управленческой отчетности с учетом специфических KPI вашего бизнеса",
        point4: "Внедрение и оптимизация ERP",
        point5: "Внедрение и автоматизация отчетности через Power BI и Excel (включая VBA-автоматизацию)"
      },
      analysis: {
        title: "Финансовый анализ",
        point1: "Подготовка профессиональных финансовых отчетов (P&L, баланс, отчет о движении денежных средств)",
        point2: "Комплексный финансовый анализ и диагностика бизнеса",
        point3: "Анализ общих финансовых показателей",
        point4: "Специальные коэффициенты и анализ в зависимости от бизнеса"
      },
      planning: {
        title: "Финансовое планирование и прогнозирование/бюджетирование",
        point1: "Разработка и внедрение системы бюджетирования",
        point2: "Составление бюджета, прогнозирование показателей бизнеса (как коммерческих, так и финансовых) и самого бизнеса в целом",
        point3: "Анализ отклонений",
        point4: "Анализ и прогнозирование денежных потоков (cash flow)"
      },
      modeling: {
        title: "Финансовое моделирование",
        point1: "Моделирование бизнес-кейсов для новых проектов/новых направлений бизнеса/продуктов и услуг, включая подходы моделирования с использованием трех утверждений/DCF/сравнения рынков"
      },
    },

    contact: {
      tag: "Свяжитесь с нами",
      title: "Связаться",
      description: "Готовы трансформировать свой бизнес? Свяжитесь с нами сегодня для бесплатной консультации.",
      address: "ул. Буюк Ипак Юли, 9, Мирзо-Улугбекский район, Ташкент, Узбекистан",
      phone: "+998974405320",
      email: "info@finspect.org",
      hours: "Понедельник - Пятница: 9:00 - 18:00",
    },
    footer: {
      copyright: "© 2025 Finspect Advisory. Все права защищены.",
    },
  },
  uz: {
    nav: {
      about: "Biz haqimizda",
      services: "Xizmatlar",
      expertise: "Ekspertiza",
      contact: "Aloqa",
    },
    hero: {
      title: "Global biznes uchun moliyaviy ekspertiza",
      description:
        "Finspect Advisory global tajriba va mahalliy ekspertiza bilan boshqaruv hisoboti, moliyalashtirish va CFO maslahat xizmatlarini taqdim etadi.",
      contact: "Maslahat buyurtma qilish",
      services: "Bizning xizmatlarimiz",
    },
    about: {
      tag: "Biz haqimizda",
      title: "Biz kimmiz",
      description:
        "Finspect Advisory'da bizda boshqaruv hisoboti, moliyalashtirish va CFO maslahat xizmatlarini boshqarishda keng tajribaga ega bo'lgan professional jamoa bor.",
      feature1: "Global tajriba",
      feature2: "Keng imkoniyatlar",
      feature3: "Siz uchun muhim bo'lgan narsalarni qadrlaymiz",
      feature4: "Ishonchli munosabatlar qurishga e'tibor qaratamiz",
    },
    services: {
      tag: "Xizmatlar",
      title: "Bizning maslahat xizmatlarimiz",
      description: "Finspect Advisory taklif qiladi:",
      optimization: {
        title: "Moliyaviy jarayonlarni optimallashtirish",
        point1: "Moliyaviy jarayonlarni ko'rib chiqish",
        point2: "Biznes-jarayonni avtomatlashtirish, optimallashtirish (ERPni joriy etish)",
        point3: "Maxsus KPI bilan boshqaruv hisobotini sozlash",
        point4: "ERP joriy etish va optimallashtirish",
        point5: "Power BI va Excel avtomatlashtirish (VBA'ni o'z ichiga olgan holda)"
      },
      analysis: {
        title: "Moliyaviy tahlil",
        point1: "Professional moliyaviy hisobotlar tayyorlash (P&L, balans, pul oqimi)",
        point2: "Keng qamrovli moliyaviy tahlil va biznes diagnostikasi",
        point3: "Umumiy moliyaviy koeffitsientlar tahlili",
        point4: "Biznesga qarab maxsus koeffitsientlar va tahlil"
      },
      planning: {
        title: "Moliyaviy rejalashtirish va prognozlash/byudjetlashtirish",
        point1: "Byudjetlashtirish tizimlarini ishlab chiqish va joriy etish",
        point2: "Byudjet tayyorlash va biznes ko'rsatkichlarini prognozlash",
        point3: "Farqlar tahlili",
        point4: "Pul oqimi tahlili va prognozlashtirish"
      },
      modeling: {
        title: "Moliyaviy modellashtirish",
        point1: "Yangi loyihalar/yangi biznes yo'nalishlari/mahsulotlar va xizmatlar uchun biznes holatlarini modellashtirish, shu jumladan 3-Statement modellashtirish/DCF/Bozor taqqoslash yondashuvlari",
      },
    },

    contact: {
      tag: "Biz bilan bog'laning",
      title: "Aloqaga chiqing",
      description: "Biznesingizni o'zgartirishga tayyormisiz? Bepul maslahat uchun bugun biz bilan bog'laning.",
      address: "Buyuk Ipak Yo'li ko'chasi, 9, Mirzo Ulug'bek tumani, Toshkent, O'zbekiston",
      phone: "+998974405320",
      email: "info@finspect.org",
      hours: "Dushanba - Juma: 9:00 - 18:00",
    },
    footer: {
      copyright: "© 2025 Finspect Advisory. Barcha huquqlar himoyalangan.",
    },
  },
}

// Function to change language
function changeLanguage(lang) {
  const elements = document.querySelectorAll("[data-i18n]")

  elements.forEach((element) => {
    const keys = element.getAttribute("data-i18n").split(".")
    let text = translations[lang]

    // Navigate through the nested objects
    for (const key of keys) {
      if (text && text[key] !== undefined) {
        text = text[key]
      } else {
        // If translation not found, keep the current text
        text = element.textContent
        break
      }
    }

    // Update the element's text content
    if (typeof text === "string") {
      element.textContent = text
    }
  })

  // Update HTML lang attribute
  document.documentElement.lang = lang

  // Update active class on language buttons
  const languageBtns = document.querySelectorAll(".language-btn")
  languageBtns.forEach((btn) => {
    if (btn.getAttribute("data-lang") === lang) {
      btn.classList.add("active")
    } else {
      btn.classList.remove("active")
    }
  })
}

// Initialize with default language or saved language
document.addEventListener("DOMContentLoaded", () => {
  // Get language buttons
  const languageBtns = document.querySelectorAll(".language-btn")

  // Add click event listeners to language buttons (single source of truth)
  languageBtns.forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.getAttribute("data-lang")
      
      // Remove active class from all buttons
      languageBtns.forEach((b) => b.classList.remove("active"))
      
      // Add active class to clicked button
      btn.classList.add("active")
      
      // Change language
      changeLanguage(lang)
      
      // Save language preference
      localStorage.setItem("language", lang)
    })
  })

  // Load saved language preference or use the active button's language
  const savedLanguage = localStorage.getItem("language")
  const activeBtn = document.querySelector(".language-btn.active")

  if (savedLanguage) {
    changeLanguage(savedLanguage)
  } else if (activeBtn) {
    const defaultLang = activeBtn.getAttribute("data-lang")
    changeLanguage(defaultLang)
  } else {
    changeLanguage("en") // Fallback to English
  }
})

